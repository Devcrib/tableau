let Tableau=function(e={}){if(typeof t=="undefined"){if(typeof jQuery!="undefined")var t=jQuery;else throw ReferenceError("jQuery is required to use Tableau")}e=t.extend(e,{minCellWidth:240,bordered:true,firstColumnWidth:0});console.log(e);t("table.tableau").each(function(l,s){let o,i,d,r,a,n,f=false;let u=t("<div></div>").addClass("tableau");let h=t("<div></div>").addClass("tableau-inner");let c=t(s).clone().removeClass("tableau").addClass(e.bordered?"bordered":"");c.appendTo(h);h.appendTo(u);u.insertBefore(s);s.remove();p();u.scroll(function(e){if(!f)return;let l=t(this).scrollLeft();let s=t(this).scrollTop();i.css("top",s);r.css({left:l});if(l!=0)r.addClass("floating");else r.removeClass("floating")});function p(){i=t("thead",t(c));d=t("tbody",t(c));r=t("td:first-of-type",d);a=t("tr:first-of-type>th",i).length;n=t("th,td",u);r.push(t("th:first-of-type",i)[0]);r.css({position:"relative",left:0});o=u.width()/a;o=o<e.minCellWidth?e.minCellWidth:o;n.css("min-width",o);d.css("marginTop",i.height());f=true}u[0].tableau={refresh:(l={})=>{f=false;t.extend(e,l);r.css({left:0}).removeClass("floating");p()}}})};if(typeof module!="undefined"&&module.exports)module.exports=Tableau;
